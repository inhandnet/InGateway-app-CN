# DeviceSupervisor 2.0升级注意事项
以下将版本号为**1.2.X**的DeviceSupervisor简称为**DS 1.0**，将版本号为**2.X.X**的 DeviceSupervisor简称为**DS 2.0**，将DS 1.0升级到DS 2.0需要注意以下事项。

## 全局说明
1. 仅支持1.2.9及以上的DS 1.0版本平滑升级至DS 2.0；
2. 升级后DS 1.0的配置信息将会被翻译为DS 2.0的配置，升级后不能再回退到DS 1.0版本；
3. 平滑升级后,调用DS 1.0 **get_tag_config** API获取到的配置格式有变更；
4. DS 2.0的配置和DS 1.0不一致，DS 1.0的配置文件无法导入DS 2.0。

## 升级后的名词解释
- 设备 --> 控制器
- 变量 --> 测点
- 告警策略 --> 告警规则
- 分组(轮询间隔) --> 分组(上报间隔)
- 新增控制器“轮询间隔”

## 各功能模块更新说明
### 测点监控
1. 升级后OPCUA/EtherNetIP的测点配置信息将被丢弃；
2. 数据类型 **BOOL** 将被转换成 **BIT**类型。DS2.2新增BIT映射，可以将BIT的测点值0/1显示成False/True；
3. DS 1.0支持多个相同控制器，DS 2.0只支持一个；
4. DS 1.0 的**只写**模式变量升级后将变成**可读可写**模式；
5. 平滑升级后，modbus地址变化：**20000->110000,40000->310000,50000->410000**；
6. 平滑升级后，测点上传模式，realtime -> periodic。

### 告警
1. 升级后DS 1.0存储的历史告警和离线缓存数据将会被清除；
2. DS2中的告警策略不再支持"直接使用地址"策略，会直接在相应控制器下手动添加相应的测点，上传类型是never；
3. 升级后DS 1.0的告警分组被删除，DS 2.0仅按照告警名称来区分不同的告警，需要注意DS 1.0云服务脚本如果引用了空的告警分组，则升级后此脚本可能因为没有告警分组无法运行，请在云服务脚本，手动选择触发源类型。

### 云服务
1. 升级后DS 1.0的阿里云自定义RRPC脚本，topic的响应会失效，但脚本功能可以正常执行，建议使用DS 2.0的API修改脚本；
2. 平滑升级不支持GreenGrass Core相关配置迁移；
3. 平滑升级后，云服务所用证书名称会变成DS 2.0默认的证书名称，不影响功能使用；
4. 平滑升级后,调用DS1"获取配置API"获取到的配置格式有变更，DS1.0获取配置的方式将不可用，建议使用2.0的api重新修改脚本；
5、logging日志输出方式不支持，建议更换为logger日志输出方式；
6、DS1的`save_data` API接口不再支持。

### 参数设置
1. 平滑升级后，自定义参数新增SN和MAC两个参数，DS 1.0内置的参数gateway_sn也会显示添加出来，如果脚本中使用了gateway_sn，请谨慎删除gateway_sn，可以使用DS 2.0新增的SN代替gateway_sn；
2. 平滑升级后，参数设置取消了历史数据最大条数这一项。

## DS2.0.1及2.1.1升级到DS2.2注意事项说明

### 测点监控
1、三菱3C协议，地址类型T-》TN，数据类型C(16bit)-> CN，数据类型C(32bit)-> CN
2、三菱编程口协议，地址类型T-》TN，数据类型C(16bit)-> CN
3、三菱3E协议，地址类型T-》TN，数据类型C(16bit)-> CN，数据类型C(32bit)-> CN

### 云服务
1、iSCADA更换了域名，升级后默认域名从iscada.com.cn->iscada.inhandcloud.cn，如果升级前配置了iSCADA，会保留之前的域名
2、云服务的Python脚本兼容了DS1.0和DS2.0.1及2.1.1的API，但是我们更建议客户使用DS2.2提供的API